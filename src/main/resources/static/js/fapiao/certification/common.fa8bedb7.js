function isIEWeb(){return!!(window.ActiveXObject||"ActiveXObject"in window)}function checkIs360(){var e=!1,t=!1;return window.navigator.appName.indexOf("Microsoft")!=-1&&(t=!0),t&&window.navigator.userProfile+""=="null"&&(e=!0),!!e}function getWebVersion(){var e={},t=navigator.userAgent.toLowerCase();return isIEWeb()?"IE":checkIs360()?"360":(document.getBoxObjectFor?e.firefox=t.match(/firefox\/([\d.]+)/)[1]:window.MessageEvent&&!document.getBoxObjectFor?e.chrome=t.match(/chrome\/([\d.]+)/)[1]:window.opera?e.opera=t.match(/opera.([\d.]+)/)[1]:window.openDatabase&&(e.safari=t.match(/version\/([\d.]+)/)[1]),e.firefox?"Firefox":e.chrome?"Chrome":e.opera?"Opera":e.safari?"Safari":void 0)}function velidateNsrsbh(e){var t=/^[0-9a-zA-Z]+$/;return""==e?(jAlert("<div id='popup_message'>读取证书信息失败，未获取到合法的纳税人信息,请重新提交请求或检查金税盘/税控盘是否插入！</div>","提示",function(e){e&&(window.location.href=getDomainName())}),!1):!!t.test(e)||(jAlert("<div id='popup_message'>读取到的纳税人信息（纳税人识别号："+e+"）不合法！请重试</div>","提示"),!1)}function velidateXfsbh(e){var t=/^[0-9a-zA-Z]+$/;return""==e||0==e.length||(!!t.test(e)||(jAlert("<div id='popup_message'>请输入正确的销方税号！</div>","提示"),!1))}function checkFpdm(e){if(0!=e.length){if(10==e.length||12==e.length){var t=/^[0-9]*$/,n=t.test(e);return 0!=n||(jAlert("<div id='popup_message'>请输入正确的发票代码！</div>","提示"),!1)}return jAlert("<div id='popup_message'>请输入正确的发票代码！</div>","提示"),!1}return!0}function checkFphm(e){var t=/^\d{8}$/,n=/^0{8}$/,i=t.test(e),o=n.test(e);return 0==e.length||(1==i&&0==o||(jAlert("<div id='popup_message'>请输入正确的发票号码！</div>","提示"),!1))}function checkPass(e){var t=0;return e.match(/([a-z])+/)&&t++,e.match(/([0-9])+/)&&t++,e.match(/([A-Z])+/)&&t++,e.match(/[^a-zA-Z0-9]+/)&&t++,t}function getDqSsq(e){var t="",n=0;if(""==e){var i=new Date;t=i.getFullYear(),n=i.getMonth()+1}else t=e.substring(0,4),n=parseInt(e.substring(4),10);return t+"年"+n+"月"}function getDqrq(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n<10&&(n="0"+n),i<10&&(i="0"+i),t+"-"+n+"-"+i}function getRzcxDate(e){var t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(5,7),10);parseInt(e.substring(8),10);return 1==n?(t-=1,n=11):2==n?(t-=1,n=12):n-=2,n<10&&(n="0"+n),t+"-"+n+"-01"}function getNowDate(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return 1==e?(1==i?(n-=1,i=12):i-=1,o=1):2==e&&(1==i?(i=12,n-=1):i-=1,o=getDayNum(n,i)),i<10&&(i="0"+i),o<10&&(o="0"+o),n+"-"+i+"-"+o}function getFirstDayOfMonth(e){var t="",n="";if(""==e||null==e||void 0==e){var i=new Date;t=i.getFullYear(),n=i.getMonth()+1}else t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(5,7),10);return n<10&&(n="0"+n),t+"-"+n+"-01"}function getXtsj(e,t){var n=parseInt(e.substring(0,4),10),i=parseInt(e.substring(5,7),10),o=parseInt(e.substring(8),10);return 1==t?(1==i?(n-=1,i=12):i-=1,o=1):2==t&&(1==i?(i=12,n-=1):i-=1,o=getDayNum(n,i)),i<10&&(i="0"+i),o<10&&(o="0"+o),n+"-"+i+"-"+o}function getDayNum(e,t){var n=0;return n=2==t?e%4==0&&e%100!=0||e%400==0?29:28:4==t||6==t||9==t||11==t?30:31}function getFormatYuan(e){e+="";var t="",n="";if(""!=e){for(var i=e.split("."),o=i[0].length,r=(parseInt(o/3),i[0].split("")),a=o-1;a>=0;)t+=r[a],a-1>=0&&(t+=r[a-1]),a-2>=0&&(t+=r[a-2]),a-3>=0&&(t+=","),a-=3;n=t.split("").reverse().join(""),2==i.length?2==i[1].length?n+="."+i[1]:1==i[1].length&&(n+="."+i[1]+"0"):1==i.length&&(n+=".00")}else n="0";return n}function getFpfs(e){var t=0;if(""!=e){t=e;var n=e.indexOf(".");n>0&&(t=e.substring(0,n))}return t}function getHxResult(e){var t="";return"1"==e?t="勾选":"0"==e&&(t="撤销"),t}function jungeIE(){var e=navigator.appName,t=navigator.appVersion,n=t.split(";"),i=n[1].replace(/[ ]/g,""),o="Y";return"Microsoft Internet Explorer"==e&&"MSIE6.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE7.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE8.0"==i?o="N":"Microsoft Internet Explorer"==e&&"MSIE9.0"==i&&(o="N"),o}function getDomainName(){var e=window.location.href,t=e.lastIndexOf("/"),n=e.substring(0,t)+"/";return n}function getUrl(){var e=window.location.href,t=e.lastIndexOf("/"),n=e.substring(t+1);return n}function quit(){jConfirm("<div id='popup_message'><br/>确定退出系统？<br/></div>","确认信息",function(e){if(e){var t=getCert(),n=/^[0-9a-zA-Z]+$/;if(""==t||!n.test(t))return window.location=getDomainName(),clearCookie("token"),clearCookie("nsrmc"),void clearCookie("dqrq");$.ajax({type:"post",url:IP+"/SbsqWW/quit.do",data:{cert:t},timeout:TIMEOUT,dataType:"jsonp",callback:"json",success:function(e){delayFlag="1";var t=e.key1;clearCookie("token"),clearCookie("nsrmc"),clearCookie("dqrq"),"01"==t?window.location=getDomainName():"03"==t&&jAlert("<div id='popup_message'>系统异常</div>！","提示")},error:function(){window.location=getDomainName()}})}})}function changeDateYYYYMM(e){if(null==e||void 0==e)return"";var t=e.substring(0,4),n=parseInt(e.substring(4),10);return t+"年"+n+"月"}function changeDateYYYYMMDD(e){if(null==e||void 0==e)return"";var t=e.substring(0,4),n=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6),10);return t+"年"+n+"月"+i+"日"}function dateYYYYandMMandDD(e){if(null==e||void 0==e)return"";var t=e.substring(0,4),n=e.substring(4,6),i=e.substring(6);return t+"-"+n+"-"+i}function showModifyLog(){var e=getCookie("token"),t=getCert();if(velidateNsrsbh(t)){var n={cert:t,token:e,ymbb:"5.0.00"};$.ajax({type:"post",url:IP+"/SbsqWW/nsrdjxgrzrzcx.do",data:n,timeout:TIMEOUT,dataType:"jsonp",jsonp:"callback",success:function(t){var n=t.key1;if("00"==n){var i=t.key2;jAlert("<div id='popup_message'>查询失败！"+i+"</div>","提示")}else if("01"==n){e=t.key2,clearCookie("token"),setCookie("token",e,seconds);for(var o=t.key3,r=o.split(";"),a=r.length,s=[],p=0;p<a-1;p++){var d=r[p].split("=");s.push(createNsrxxLog(d))}loadNsrxxLog(s),$(".theme-popover-mask3").fadeIn(100),$(".theme-popover3").slideDown(200)}else"09"==n?jAlert("<div id='popup_message'>会话已超时，请重新登陆！</div>","提示",function(e){e&&(window.location.href=getDomainName())}):"10"==n?jAlert("<div id='popup_message'>超过最大请求数！</div>","提示"):"21"==n?jAlert("<div id='popup_message'>不存在修改记录！</div>","提示"):"98"==n?jAlert("<div id='popup_message'>外网调用内网异常，请重试！","提示"):"100"==n?jAlert("<div id='popup_message'>内网数据异常！","提示"):jAlert("<div id='popup_message'>系统异常，错误代码为:"+n+"</div>","提示")},error:function(e){""==e.responseText||void 0==e.responseText?jAlert("<div id='popup_message'>网络异常，请重试！</div>","提示"):jAlert("<div id='popup_message'>系统异常，请重试！统一受理系统报文为:"+e.responseText+"</div>","提示")}})}}function setTab(e,t,n){for(i=1;i<=n;i++){var o=document.getElementById(e+i),r=document.getElementById("con_"+e+"_"+i);o.className=i==t?"hover":"",r.style.display=i==t?"block":"none"}}function getTyslInfo(e){var t=/<TITLE>([\s\S]*?)<\/TITLE>/,n=e.match(t),i=n[0].replace("<TITLE>","").replace("</TITLE>",""),o=/<H3>([\s\S]*?)<\/H3>/,r=e.match(o),a=r[0].replace("<H3>","").replace("</H3>","").replace("<i>","").replace("</i>",""),s=/<H4>([\s\S]*?)<\/H4>/,p=e.match(s),d=p[0].replace("<H4>","").replace("</H4>",""),c=/<P>([\s\S]*?)<\/P>/,g=e.match(c),u=g[0].replace('<P><FONT FACE="Courier New">',"").replace("</FONT></P>","");return i+"\n"+a+"\n"+d+"\n"+u}function addSite(){var e="增值税发票选择确认平台",t=getDomainName();try{window.external.AddFavorite(t,e)}catch(n){try{window.sidebar.addPanel(e,t,"")}catch(n){var i="您的安全设置不允许此操作！<br />您需要手动搜藏网站：<br/><span style='color: red;'>"+t+"</span>";jAlert("<div id='popup_message'>"+i+"</div>","提示")}}}function setHome(e){var t=getDomainName();try{e.style.behavior="url(#default#homepage)",e.setHomePage(t)}catch(n){if(window.netscape)try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(n){var i="您的安全设置不允许此操作！<br />您需要手动将：<br/><span style='color: red;'>"+t+"</span><br/>设置为首页！";jAlert("<div id='popup_message'>"+i+"</div>","提示")}else{var i="您的安全设置不允许此操作！<br />您需要手动将：<br /><span style='color: red;'>"+t+"</span><br />设置为首页！";jAlert("<div id='popup_message'>"+i+"</div>","提示")}}}function toDesktop(){var e=getDomainName();try{var t=new ActiveXObject("WScript.Shell"),n=t.CreateShortcut(t.SpecialFolders("Desktop")+"\\增值税发票选择确认平台.url");n.TargetPath=e,n.Save()}catch(i){alert("快捷方式创建失败，浏览器不支持！")}}function helpInfo(e){window.showModelessDialog("help-"+e+".html","","dialogTop:50px;dialogWidth:1100px;dialogHeight:600px;minimize:yes;maximize:yes;")}function helpInfo_rename(e){window.showModelessDialog(e,"","dialogTop:50px;dialogWidth:1100px;dialogHeight:600px;minimize:yes;maximize:yes;")}function getCityName(){for(var e=new Array("https://fpdk.bjsat.gov.cn/","https://fpdk.tjsat.gov.cn/","https://fpdk.he-n-tax.gov.cn:81/","https://fpdk.tax.sx.cn/","https://fpdk.nm-n-tax.gov.cn/","https://fpdk.tax.ln.cn/","https://fpdk.dlntax.gov.cn/","https://fpdk.jl-n-tax.gov.cn:4431/","https://fpdk.hl-n-tax.gov.cn/","https://fpdk.tax.sh.gov.cn/","https://fpdk.jsgs.gov.cn:81/","https://fpdk.zjtax.gov.cn/","https://fpdk.nb-n-tax.gov.cn/","https://fpdk.ah-n-tax.gov.cn/","https://fpdk.fj-n-tax.gov.cn/","https://fpdk.xm-n-tax.gov.cn/","https://fpdk.jxgs.gov.cn/","https://fpdk.sd-n-tax.gov.cn/","https://fpdk.qd-n-tax.gov.cn/","https://fpdk.ha-n-tax.gov.cn/","https://fpdk.hb-n-tax.gov.cn/","https://fpdk.hntax.gov.cn/","https://fpdk.gd-n-tax.gov.cn/","https://fpdk.szgs.gov.cn/","https://fpdk.gxgs.gov.cn/","https://fpdk.hitax.gov.cn/","https://fpdk.cqsw.gov.cn/","https://fpdk.sc-n-tax.gov.cn/","https://fpdk.gz-n-tax.gov.cn/","https://fpdk.yngs.gov.cn/","https://fpdk.xztax.gov.cn/","https://fprzweb.sn-n-tax.gov.cn/","https://fpdk.gs-n-tax.gov.cn/","http://fpdk.qh-n-tax.gov.cn/","https://fpdk.nxgs.gov.cn/","https://fpdk.xj-n-tax.gov.cn/","http://172.30.11.88:90/"),t=new Array("北京","天津","河北","山西","内蒙古","辽宁","大连","吉林","黑龙江","上海","江苏","浙江","宁波","安徽","福建","厦门","江西","山东","青岛","河南","湖北","湖南","广东","深圳","广西","海南","重庆","四川","贵州","云南","西藏","陕西","甘肃","青海","宁夏","新疆","首都"),n=getDomainName(),i="",o=0;o<e.length;o++)e[o].indexOf(n)>=0&&(i=t[o]);return void 0==i||null==i||0==i.length?"":"（"+i+"）"}function doCallback(e,t){return e.apply(this,t)}function showMenu(e){var t=!0;if(null!=e&&void 0!=e){var n=getUrl(),i=e.split(MENUSPLIT);null!=i&&3==i.length?"0"==i[0]||"5"==i[0]||"6"==i[0]?(n.indexOf("hts")<0&&(n.indexOf("dbts")>0||n.indexOf("ts")>0)&&(t=!1,jAlert("<div id='popup_message'>您没有此功能权限3！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide()):2==i[1]?(n.indexOf("hts")<0&&n.indexOf("dbts")>0&&(t=!1,jAlert("<div id='popup_message'>您没有此功能权限1！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").hide(),$("#menuts").show(),$("#menudbts").hide(),$("#pos").hide(),$("#posdbts").show()):3==i[1]?($("#menu").hide(),$("#menuts").hide(),$("#menudbts").show(),$("#pos").hide(),$("#posdbts").show()):(n.indexOf("hts")<0&&(n.indexOf("dbts")>0||n.indexOf("ts")>0)&&(t=!1,jAlert("<div id='popup_message'>您没有此功能权限2！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide()):(n.indexOf("hts")<0&&(n.indexOf("dbts")>0||n.indexOf("ts")>0)&&(t=!1,jAlert("<div id='popup_message'>您没有此功能权限3！</div>","提示",function(e){e&&(window.location.href=getDomainName())})),$("#menu").show(),$("#menuts").hide(),$("#menudbts").hide())}else t=!1,jAlert("<div id='popup_message'>会话失效，请重新登录！</div>","提示",function(e){e&&(window.location.href=getDomainName())});return t}var MENUSPLIT="~";